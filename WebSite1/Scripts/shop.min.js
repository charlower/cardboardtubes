/// <reference path="shop.min.js" />
!function(t,s,e,i){"use strict";function a(s,e){this.element=t(s),this.settings=t.extend(!0,{},r,e),this.cart=this.element.find("."+this.settings.cart),this.wishlist=this.element.find("."+this.settings.wishlist),this.product=this.element.find("."+this.settings.product),this._defaults=r,this._name=n,this.init()}var n="ctshop",r={cart:"ct-cart",product:"ct-product",product_title:"ct-product-title",product_price:"ct-product-price",product_button:"ct-product-button",product_image:!1,product_wishlist:"ct-product-wishlist",wishlist:"ct-wishlist",currency:"$",currency_after_number:"false",permanent_cart_buttons:"false",display_total_value:"true",permanent_total_value:"false",animation:"fadeIn",empty_disable:"false",empty_text:"Your cart is empty",paypal:{business:"office@createit.pl",currency_code:"USD",lc:"EN",cpp_cart_border_color:"",cpp_payflow_color:"",no_note:"0",no_shipping:"0","return":"",cancel_return:""},init:!1,before_add_to_cart:!1,after_add_to_cart:!1,remove_item_from_cart:!1,before_checkout:!1,after_clear_cart:!1,after_value_changes:!1,before_add_to_wishlist:!1,after_add_to_wishlist:!1,remove_item_from_wishlist:!1};t.extend(a.prototype,{init:function(){var e=this;if(e.cart=e.cart.append("<ol/>").find("ol"),e.settings.wishlist&&(e.wishlist=e.wishlist.append("<ol/>").find("ol")),s.sessionStorage["ct-shopping-wishlist"]){var i=e.wishlist.find("li").length;e.create_storage_wish(),e.remove_item(i,!0)}if(e.permanent_total(),e.permanent_cart_buttons(),s.sessionStorage["ct-shopping-cart"]){e.create_storage_cart();var a=e.cart.find("li"),n=a.find("."+e.settings.cart+"-input"),r=a.length;"false"===e.settings.permanent_cart_buttons&&e.add_cart_buttons(),"true"===e.settings.display_total_value&&"false"===e.settings.permanent_total_value&&e.append_total(),e.calculate_total_value(),e.quantity_change(n),e.remove_item(r)}e.settings.init&&e.settings.init(),e.cart_empty(),e.product.each(function(s){var i=t(this),a=e.absolute_url()+i.find("."+e.settings.product_image).attr("src"),n=i.find("."+e.settings.product_title),r=i.find("."+e.settings.product_price),c=i.find("."+e.settings.product_button),l=n.text(),o=r.text().replace(",","").replace(/[^\d.]/g,"");if(e.settings.wishlist){var d=i.find("."+e.settings.product_wishlist);d.on("click touchend",function(t){t.preventDefault(),e.settings.before_add_to_wishlist&&e.settings.before_add_to_wishlist(),l=e.check_if_title(n,l),o=e.check_if_price(r,o);var c,d=i.attr("data-id",l.replace(/ /g,"").replace(/\r\n|\r|\n/g,"").replace(/[^a-zA-Z 0-9]+/g,"")+o.replace(/\r\n|\r|\n/g,"").replace(/[^a-zA-Z 0-9]+/g,"")+"_"+(s+1)).attr("data-id"),u=e.wishlist.find("li"),p=e.wishlist.find("[data-id="+d+"]"),_=p.attr("data-id"),g=e.cart.find("[data-id="+d+"]");return g.length||0===u.length||_===d?0!==u.length||g.length||e.add_to_wishlist(l,o,d,a):e.add_to_wishlist(l,o,d,a),u=e.wishlist.find("li"),c=u.length,e.remove_item(c,!0),e.settings.after_add_to_wishlist&&e.settings.after_add_to_wishlist(),!1})}c.on("click touchend",function(c){c.preventDefault(),e.settings.before_add_to_cart&&e.settings.before_add_to_cart(),l=e.check_if_title(n,l),o=e.check_if_price(r,o);var d,u=i.attr("data-id",l.replace(/ /g,"").replace(/\r\n|\r|\n/g,"").replace(/[^a-zA-Z 0-9]+/g,"")+o.replace(/\r\n|\r|\n/g,"").replace(/[^a-zA-Z 0-9]+/g,"")+"_"+(s+1)).attr("data-id"),p=e.cart.find("li"),_=e.cart.find("[data-id="+u+"]"),g=_.attr("data-id"),m=p.find("."+e.settings.cart+"-input");return 0!==p.length?g!==u?e.add_to_cart(l,o,u,a):_.find("input").val(function(t,s){return parseInt(s,10)+1}):(e.add_to_cart(l,o,u,a),"false"===e.settings.permanent_cart_buttons&&e.add_cart_buttons(),"true"===e.settings.display_total_value&&"false"===e.settings.permanent_total_value&&e.append_total()),e.settings.wishlist&&t("."+e.settings.wishlist).find("[data-id="+u+"]").remove(),p=e.cart.find("li"),m=p.find("."+e.settings.cart+"-input"),d=p.length,e.quantity_change(m),e.calculate_total_value(),e.remove_item(d),e.settings.after_add_to_cart&&e.settings.after_add_to_cart(),!1})})},add_to_wishlist:function(t,s,e,i){var a=this;a.settings.product_image?"true"===a.settings.currency_after_number?a.wishlist.append('<li class="animated '+a.settings.animation+'" data-id='+e+"><div class="+a.settings.wishlist+"-left><img src="+i+" /></div><div class="+a.settings.wishlist+"-body><span class="+a.settings.wishlist+"-name>"+t+"</span><span class="+a.settings.wishlist+"-price>"+s+a.settings.currency+"</span><button class="+a.settings.wishlist+"-remove>&times;</button><button class="+a.settings.wishlist+"-add-to-cart>Add To Cart</button></div></li>"):a.wishlist.append('<li class="animated '+a.settings.animation+'" data-id='+e+"><div class="+a.settings.wishlist+"-left><img src="+i+" /></div><div class="+a.settings.wishlist+"-body><span class="+a.settings.wishlist+"-name>"+t+"</span><span class="+a.settings.wishlist+"-price>"+a.settings.currency+s+"</span><button class="+a.settings.wishlist+"-remove>&times;</button><button class="+a.settings.wishlist+"-add-to-cart>Add To Cart</button></div></li>"):"true"===a.settings.currency_after_number?a.wishlist.append('<li class="animated '+a.settings.animation+'" data-id='+e+"><span class="+a.settings.wishlist+"-name>"+t+"</span><span class="+a.settings.wishlist+"-price>"+s+a.settings.currency+"</span><button class="+a.settings.wishlist+"-remove>&times;</button><button class="+a.settings.wishlist+"-add-to-cart>Add To Cart</button></li>"):a.wishlist.append('<li class="animated '+a.settings.animation+'" data-id='+e+"><span class="+a.settings.wishlist+"-name>"+t+"</span><span class="+a.settings.wishlist+"-price>"+a.settings.currency+s+"</span><button class="+a.settings.wishlist+"-remove>&times;</button><button class="+a.settings.wishlist+"-add-to-cart>Add To Cart</button></li>"),a.wishlist_add_to_cart(),a.wish_storage_set()},add_to_cart:function(t,s,e,i){var a=this;a.settings.product_image?"true"===a.settings.currency_after_number?a.cart.append('<li class="animated '+a.settings.animation+'" data-id='+e+"><div class="+a.settings.cart+"-left><img src="+i+" /></div><div class="+a.settings.cart+"-body><span class="+a.settings.cart+"-name>"+t+"</span><span class="+a.settings.cart+"-price>"+s+a.settings.currency+'</span><input type="number" min="1" value="1" class='+a.settings.cart+"-input><button class="+a.settings.cart+"-remove>&times;</button></div></li>"):a.cart.append('<li class="animated '+a.settings.animation+'" data-id='+e+"><div class="+a.settings.cart+"-left><img src="+i+" /></div><div class="+a.settings.cart+"-body><span class="+a.settings.cart+"-name>"+t+"</span><span class="+a.settings.cart+"-price>"+a.settings.currency+s+'</span><input type="number" min="1" value="1" class='+a.settings.cart+"-input><button class="+a.settings.cart+"-remove>&times;</button></div></li>"):"true"===a.settings.currency_after_number?a.cart.append('<li class="animated '+a.settings.animation+'" data-id='+e+"><span class="+a.settings.cart+"-name>"+t+"</span><span class="+a.settings.cart+"-price>"+s+a.settings.currency+'</span><input type="number" min="1" value="1" class='+a.settings.cart+"-input><button class="+a.settings.cart+"-remove>&times;</button></li>"):a.cart.append('<li class="animated '+a.settings.animation+'" data-id='+e+"><span class="+a.settings.cart+"-name>"+t+"</span><span class="+a.settings.cart+"-price>"+a.settings.currency+s+'</span><input type="number" min="1" value="1" class='+a.settings.cart+"-input><button class="+a.settings.cart+"-remove>&times;</button></li>")},add_cart_buttons:function(){var t=this;t.cart.parent().append('<button class="'+t.settings.cart+'-clear">Clear Cart</button>'),t.cart.parent().append('<button type="submit" class="'+t.settings.cart+'-checkout">Checkout</button>'),t.clear_cart(),t.checkout_button()},checkout:function(){var s,e=this,i={cmd:"_cart",upload:1},a=t("<form />"),n={name:"item_name",quantity:"quantity",amount:"amount"};t.extend(i,e.settings.paypal),a.attr("action","https://www.paypal.com/cgi-bin/webscr"),a.attr("method","post"),a.attr("target","_blank");for(var r in i)s=t('<input type="hidden" />'),s.attr("name",r),s.attr("value",i[r]),a.append(s);e.cart.find("li").each(function(s){var i=t(this),r=i.find("."+e.settings.cart+"-name").text(),c=parseFloat(i.find("."+e.settings.cart+"-price").text().replace(/^\D+/g,"")),l=i.find("input").val(),o={name:t("<input />",{type:"hidden",name:n.name+"_"+(s+1),value:r}),amount:t("<input />",{type:"hidden",name:n.amount+"_"+(s+1),value:c}),quantity:t("<input />",{type:"hidden",name:n.quantity+"_"+(s+1),value:l})};a.append(o.name).append(o.amount).append(o.quantity)}),t("body").append(a),a.submit(),a.remove()},checkout_button:function(){var s=this;t("."+s.settings.cart+"-checkout").unbind().on("click",function(){s.settings.before_checkout&&s.settings.before_checkout(),s.checkout()})},remove_item:function(s,e){var i=this,a=i.settings.cart,n=i.cart;e&&(a=i.settings.wishlist,n=i.wishlist),t("."+a+"-remove").unbind().on("click",function(){var s=t(this),a=n.find("li").length;s.closest("li").remove(),e?(i.wish_storage_set(),1===a&&i.wish_storage_clear(),i.settings.remove_item_from_wishlist&&i.settings.remove_item_from_wishlist()):(i.calculate_total_value(),i.storage_set(),1===a&&(i.remove_cart_buttons(),i.remove_total(i.total),i.storage_clear()),i.settings.remove_item_from_cart&&i.settings.remove_item_from_cart())})},clear_cart:function(){var s=this;t("."+s.settings.cart+"-clear").on("click",function(){s.cart.find("li").each(function(){t(this).remove()}),s.remove_cart_buttons(),s.remove_total(s.total),s.storage_clear(),s.cart_empty(),s.settings.after_clear_cart&&s.settings.after_clear_cart()})},remove_cart_buttons:function(){var t=this;"false"===t.settings.permanent_cart_buttons&&t.cart.parent().find("button").remove()},check_if_title:function(t,s){return 0!==t.find("select").length?s=0!==t.find("span").length?t.find("span").text()+" - "+t.find("option:selected").val():t.find("option:selected").text():0!==t.find("input").length?s=t.find("input").val():t.is(":empty")&&(s=t.val()),s},check_if_price:function(t,s){return 0!==t.find("select").length?s=t.find("option:selected").val().replace(/^\D+/g,""):0!==t.find("input").length&&(s=t.find("input").val().replace(/^\D+/g,"")),s},permanent_cart_buttons:function(){var t=this;"true"===t.settings.permanent_cart_buttons&&t.add_cart_buttons()},calculate_total_value:function(s){var e=this,i=0,a=0;return e.cart.find("li").each(function(){var s=parseFloat(t(this).find("."+e.settings.cart+"-price").text().replace(/^\D+/g,"")),n=t(this).find("input").val();a+=s*n,i=parseFloat(a.toString()).toFixed(2)}),"true"===e.settings.display_total_value&&("true"===e.settings.currency_after_number?e.total.html(i+e.settings.currency):e.total.html(e.settings.currency+i)),e.cart_empty(),e.settings.after_value_changes&&e.settings.after_value_changes(),e.storage_set(),i},quantity_change:function(t,s){var e=this;t.change(function(){e.calculate_total_value(s)})},append_total:function(){var t=this;t.total=t.cart.parent().prepend('<span class="'+t.settings.cart+'-total">').find("."+t.settings.cart+"-total")},remove_total:function(t){var s=this;"true"===s.settings.display_total_value&&"false"===s.settings.permanent_total_value?t.remove():"true"===s.settings.permanent_total_value&&"true"===s.settings.display_total_value&&s.calculate_total_value(t)},permanent_total:function(){var t=this;"true"===t.settings.permanent_total_value&&"true"===t.settings.display_total_value&&(t.append_total(),"true"===t.settings.display_total_value&&("true"===t.settings.currency_after_number?t.total.html("0"+t.settings.currency):t.total.html(t.settings.currency+"0")))},storage_set:function(){var e=this,i={items:[]};t(e.cart).find("li").each(function(){var s=t(this),a=s.attr("data-id"),n=s.find("."+e.settings.cart+"-name").text(),r=s.find("."+e.settings.cart+"-price").text(),c=s.find("input").val(),l=s.find("img").attr("src"),o={name:n,id:a,price:r,input:c,image:l};i.items.push(o)}),s.sessionStorage.setItem("ct-shopping-cart",JSON.stringify(i))},storage_get:function(){var t=s.sessionStorage["ct-shopping-cart"];return t=JSON.parse(t)},storage_clear:function(){s.sessionStorage.removeItem("ct-shopping-cart")},wish_storage_set:function(){var e=this,i={items:[]};t(e.wishlist).find("li").each(function(){var s=t(this),a=s.attr("data-id"),n=s.find("."+e.settings.wishlist+"-name").text(),r=s.find("."+e.settings.wishlist+"-price").text(),c=s.find("img").attr("src"),l={name:n,id:a,price:r,image:c};i.items.push(l)}),s.sessionStorage.setItem("ct-shopping-wishlist",JSON.stringify(i))},wish_storage_get:function(){var t=s.sessionStorage["ct-shopping-wishlist"];return t=JSON.parse(t)},wish_storage_clear:function(){s.sessionStorage.removeItem("ct-shopping-wishlist")},create_storage_wish:function(){for(var t=this,s=t.wish_storage_get(),e=0,i=s.items.length;i>e;e++){var a=s.items[e].id,n=s.items[e].name,r=s.items[e].price,c=s.items[e].image;t.settings.product_image?t.wishlist.append('<li class="animated '+t.settings.animation+'" data-id='+a+"><div class="+t.settings.wishlist+"-left><img src="+c+" /></div><div class="+t.settings.wishlist+"-body><span class="+t.settings.wishlist+"-name>"+n+"</span><span class="+t.settings.wishlist+"-price>"+r+"</span><button class="+t.settings.wishlist+"-remove>&times;</button><button class="+t.settings.wishlist+"-add-to-cart>Add To Cart</button></div></li>"):t.wishlist.append('<li class="animated '+t.settings.animation+'" data-id='+a+"><span class="+t.settings.wishlist+"-name>"+n+"</span><span class="+t.settings.wishlist+"-price>"+r+"</span><button class="+t.settings.wishlist+"-remove>x</button><button class="+t.settings.wishlist+"-add-to-cart>Add To Cart</button></li>")}t.wishlist_add_to_cart()},create_storage_cart:function(){for(var t=this,s=t.storage_get(),e=0,i=s.items.length;i>e;e++){var a=s.items[e].id,n=s.items[e].name,r=s.items[e].price,c=s.items[e].image,l=s.items[e].input;t.settings.product_image?t.cart.append('<li class="animated '+t.settings.animation+'" data-id='+a+"><div class="+t.settings.cart+"-left><img src="+c+" /></div><div class="+t.settings.cart+"-body><span class="+t.settings.cart+"-name>"+n+"</span><span class="+t.settings.cart+"-price>"+r+'</span><input type="number" min="1" value="'+l+'" class='+t.settings.cart+"-input><button class="+t.settings.cart+"-remove>&times;</button></div></li>"):t.cart.append('<li class="animated '+t.settings.animation+'" data-id='+a+"><span class="+t.settings.cart+"-name>"+n+"</span><span class="+t.settings.cart+"-price>"+r+'</span><input type="number" min="1" value="'+l+'" class='+t.settings.cart+"-input><button class="+t.settings.cart+"-remove>x</button></li>")}},cart_empty:function(){var s=this,e=s.settings.cart+"-empty";"false"===s.settings.empty_disable&&(s.cart.find("li").length?t("."+e).remove():s.cart.parent().prepend('<span class="'+e+'">'+s.settings.empty_text+"</span>"))},wishlist_add_to_cart:function(){var s=this,e=s.wishlist.find("li");e.each(function(){var e=t(this),i=e.find("."+s.settings.wishlist+"-add-to-cart");i.on("click touchend",function(t){var i,a=e.attr("data-id"),n=e.find("."+s.settings.wishlist+"-name").text(),r=e.find("."+s.settings.wishlist+"-price").text().replace(",","").replace(/[^\d.]/g,""),c=e.find("img").attr("src"),l=s.cart.find("li"),o=s.cart.find("[data-id="+a+"]"),d=o.attr("data-id"),u=l.find("."+s.settings.cart+"-input");0!==l.length?d!==a&&s.add_to_cart(n,r,a,c):(s.add_to_cart(n,r,a,c),"false"===s.settings.permanent_cart_buttons&&s.add_cart_buttons(),"true"===s.settings.display_total_value&&"false"===s.settings.permanent_total_value&&s.append_total()),l=s.cart.find("li"),u=l.find("."+s.settings.cart+"-input"),i=l.length,s.quantity_change(u),s.calculate_total_value(),s.remove_item(i),e.remove(),s.wish_storage_set()})})},absolute_url:function(){var t="",e=s.location.href.split("/");return e.pop(),t=e.join("/")+"/"}}),t.fn[n]=function(s){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new a(this,s))})}}(jQuery,window,document);